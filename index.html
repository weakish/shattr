<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="shattr : A `shatag` clone in Ceylon.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>shattr</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/weakish/shattr">View on GitHub</a>

          <h1 id="project_title">shattr</h1>
          <h2 id="project_tagline">A `shatag` clone in Ceylon.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/weakish/shattr/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/weakish/shattr/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<h1 id="shattr">shattr</h1>
<p>A <a href="https://bitbucket.org/maugier/shatag">shatag</a> clone in Ceylon.</p>
<h2 id="status">Status</h2>
<p>A lot of features unimplemented. Usable for implemented feature.</p>
<h2 id="why">Why</h2>
<p><code>shatag -rl</code> is slow since it needs to query SQL database for every file. <code>shattr</code> reads all SHA-256 checksums in memory instead.</p>
<h2 id="installation">Installation</h2>
<h3 id="with-ceylon">With <code>Ceylon</code></h3>
<p>If you have <code>Ceylon</code> installed, you can download the <code>.car</code> archive (<code>&lt; 4K</code>) at <a href="https://github.com/weakish/shattr/releases">Releases</a> and put it into <a href="http://ceylon-lang.org/documentation/1.2/reference/repository/">Ceylon module repository</a>.</p>
<h3 id="with-java-directly">With <code>java</code> directly</h3>
<p>If you have Java Runtime (7+) installed , but not Ceylon, you can download the fat jar file (<code>3.2M</code>).</p>
<h3 id="compile-manually">Compile manually</h3>
<p>Clone this repository and run <code>ceylon compile</code>.</p>
<p>Tested with <code>Ceylon 1.2+</code>. May work with older versions.</p>
<h2 id="usage">Usage</h2>
<pre><code>$SHATTR_COMMAND PATH_TO_HASHLIST</code></pre>
<p>will print status of files under the current directory.</p>
<pre><code>N empty file
D duplicated file
U unique file
? unknown file (without `sha256` xattr, no read permission, etc)</code></pre>
<p><code>$SHATTR_COMMAND</code> is one of:</p>
<ul>
<li><code>ceylon run io.github.weakish.shattr</code> if using <code>Ceylon</code>;</li>
<li><code>java -jar /path/to/io.github.weakish.shattr-0.2.0.jar</code> if using <code>java</code> directly.</li>
</ul>
<p>If <code>PATH_TO_HASHLIST</code> is not specified, <code>shattr</code> will use <code>~/.shatagdb-hash-list.txt</code>.</p>
<p><code>PATH_TO_HASHLIST</code> is a text file, containing all SHA256 hashes of known files, one per line.</p>
<p>For example, if using <code>shatag</code> with an sqlite3 backend, <code>PATH_TO_HASHLIST</code> can be produced via:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="kw">sqlite3</span> -noheader -csv ~/.shatagdb <span class="st">&quot;select hash from contents;&quot;</span> <span class="kw">&gt;</span> hashlist.csv</code></pre></div>
<h2 id="contribute">Contribute</h2>
<p>Send pull requests at <a href="https://github.com/weakish/shattr" class="uri">https://github.com/weakish/shattr</a>.</p>
<h3 id="coding-style">Coding style</h3>
<h4 id="prefer-if-.-then-.-else-.-to-.-then-.-else-.">Prefer <code>if . then . else .</code> to <code>. then . else .</code></h4>
<p>We feel <code>A then B else C</code> is confusing.</p>
<p>Readers may think <code>A then B else C</code> is <code>A ? B : C</code> in other languages, but they are <strong>not the same</strong>:</p>
<ol style="list-style-type: decimal">
<li><p><code>A then B else C</code> is actually <code>(A then B) else C</code>:</p>
<ul>
<li><code>A then B</code> evaluates to <code>B</code> if <code>A</code> is not <code>null</code>, otherwise evaluates to <code>null</code>.</li>
<li><code>X else Y</code> evaluates to <code>X</code> if <code>X</code> is not <code>null</code>, otherwise evaluates to <code>Y</code>.</li>
</ul></li>
<li><p>Thus the type of <code>B</code> is <code>T given T satisfies Object</code>, i.e. requires to not be <code>null</code>.</p></li>
</ol>
<p>I think <code>if (A) then B else C</code> is much cleaner.</p>
<h4 id="avoid-i-i">Avoid <code>i++</code>, <code>++i</code></h4>
<p>Compared to <code>i+=1</code>, <code>i++</code> only saves one character.</p>
<p><code>y=i++</code> and <code>y=++i</code> is really confusing to me.</p>
<p>Same applies to <code>i--</code> and <code>--i</code>.</p>
<h4 id="prefer-functions-to-classes">Prefer functions to classes</h4>
<p>Currently there is no class declaration in code source.</p>
<p>We prefer to declare classes for new types (or type aliases).</p>
<h4 id="other">Other</h4>
<p>If you disagree the above, file an issue.</p>
<p>Send pull requests to add new coding style.</p>
<p>Please do not add formatting style such as <code>use two spaces</code> and <code>closing braces on their own line</code>. Formatting style is unlikely to affect readability of code, and can be auto adjusted via <code>ceylon format</code>.</p>
<h2 id="license">License</h2>
<p>0BSD.</p>
    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">shattr maintained by <a href="https://github.com/weakish">weakish</a></p>
      </footer>
  </body>
</html>
